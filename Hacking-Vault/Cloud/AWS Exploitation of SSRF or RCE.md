
If you have encountered a vulnerable instance in AWS to RCE or SSRF, you can try to obtain further information(metadata) about it to compromise other users.

#### ğŸš€ - Enumeration of the vulnerable instance
---
Having other hacked user, you can try to enumerate the policies and roles attached to the exposed instance (check the EC Instance enumeration).

In the vulnerable field, start poking at policies and roles attached to the service, all these commands inject them in the parameter field of the web service, page, or whatever is exposed:

-Check there is metadata being retrieved:
`http://169.254.169.254` -> Yes, write that in the input field
You can also do this via curl, and a POST request injecting that into the variable that gets it.

-Analyze the response, it may give you a detail of the correct URI, for example "/latest", so you continue injecting:
`http://169.254.169.254/latest`

-Continue analyzing:
`http://169.254.169.254/latest/meta-data`

-If you are looking for credentials, you can start poking at iam creds:
`http://169.254.169.254/latest/meta-data/iam/security-credentials/jump-ec2-role`

Again if you have a pwned user, you can double check roles associated to the instance and check them, like this jump role.

You can retrieve credentials from the instance like that.

==Clarification==
-The IP 169.254.169.254 is used in all cloud providers as a link local to test communication between instances.


---
#### ğŸ“¦ - B
--- 

#### ğŸ–Šï¸ - C


âš  Alert 1
âš  Alert 2
âš  Alert 3


--- 

 1ï¸âƒ£ A
 2ï¸âƒ£ B
 
--- 

â—C


### Properties
---
ğŸ“† created   {{15-12-2024}} 14:27
ğŸ·ï¸ tags: #cloud #aws 

---
